#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../dbd/pmacUtil.dbd")
#! DBDEND


# # \file
# # The position compare database allows the setup of the position compare. You
# # should ensure that PLC_PMAC_position_compare.pmc or
# # PLC_BRICK_position_compare.pmc is loaded to implement this functionality on
# # the controller. It operates on a single axis, and controls the position
# # compare (EQU) outputs for that axis.
# # \n \n
# # The following screenshot shows the interface for position
# # compare:
# # \image html positionCompare.png "EDM screen for position compare"
# # - Output mode sets the position compare output to be on, off, or in auto mode
# # i.e. one or off as defined by the position compare setup below
# # - Start, stop, step and pulse setup how the output behaves in auto mode
# # - Init determines the initial state of the output before it toggles when it
# #   reaches the start position
# # \section usage_sec Use cases
# # There are a few ways that position compare can be used:
# # - Output high between two positions
# # - Pulse at start and stop positions
# # - Pulses at regular intervals between start and stop
# # - Pulses at regular intervals from start onwards
# # \section one_subsec Output high between two positions
# # - Set start to be the start of the window
# # - Set stop to be the end of the window
# # - Set step and pulse to be 0
# # \section two_subsec Pulse at start and stop positions
# # - Set start to be the position of the first pulse
# # - Set pulse to be the pulse width (minimum 2 cts)
# # - Set stop to be the position of the second pulse + the pulse width
# # - Set step to be the position of the second pulse - the position of the first
# # pulse
# # \section three_subsec Pulses at regular intervals between start and stop
# # - Set start to be the position of the first pulse
# # - Set pulse to be the pulse width (minimum 2 cts)
# # - Set step to be the distance between pulses (minimum 4 cts)
# # - Set stop to be the position of the last pulse + the pulse width
# # \section four_subsec Pulses at regular intervals from start onwards
# # - As above, but with stop = start
# % macro, P, Device Prefix
# % macro, Q, Device Suffix
# % macro, PLC, PLC number that is running PLC_xx_position_compare.pmc
# % macro, PORT, Asyn serial port to communicate with the PMAC/BRICK
# % macro, motor, Motor record that this is associated with
# % macro, OFF, Text string shown when output off
# % macro, ON, Text string shown when output on
# % macro, gda_name, Name for GDA
# % macro, gda_desc, Description for GDA
# % gdatag,template,positionCompare,$(gda_name=),$(gda_desc=)
record(ao, "$(P)$(Q):UPDATE") {
  field(DESC, "Trigger periodic poll")
  field(SCAN, "10 second")
  field(FLNK, "$(P)$(Q):RBVFAN")
}

record(ai, "$(P)$(Q):RAWCTS") {
  field(DESC, "Raw encoder counts")
  field(INP, "$(motor).REP CP")
  field(FLNK, "$(P)$(Q):RBVFAN")
}

record(stringin, "$(P)$(Q):EGU") {
  field(DESC, "EGU from motor record")
  field(INP, "$(motor).EGU CP")
}

# % gdatag,motor,ro,$(gda_name=),MOTOR,Motor Record,$(motor)
record(stringin, "$(P)$(Q):MOTOR") {
  field(DESC, "motor record name")
  field(VAL, "$(motor)")
  field(PINI, "YES")
}

record(mbbi, "$(P)$(Q):CTRL:RBV") {
  field(DESC, "Output mode readback")
  field(ZRST, "$(OFF=Off)")
  field(ONST, "$(ON=On)")
  field(TWST, "Auto")
  field(FLNK, "$(P)$(Q):CTRL:SYNC")
  field(DTYP, "stream")
  field(INP, "@pmac.proto getIntVar(P$(PLC)80) $(PORT)")
}

record(longout, "$(P)$(Q):CTRL:SYNC") {
  field(DESC, "sync demand with rbv")
  field(DOL, "$(P)$(Q):CTRL:RBV")
  field(OMSL, "closed_loop")
  field(OUT, "$(P)$(Q):CTRL PP")
}

# % gdatag,mbbinary,rw,$(gda_name=),CTRL
record(mbbo, "$(P)$(Q):CTRL") {
  field(DESC, "Output mode demand")
  field(ZRST, "$(OFF=Off)")
  field(ONST, "$(ON=On)")
  field(TWST, "Auto")
  field(OUT, "$(P)$(Q):CTRL:SET PP")
}

record(longout, "$(P)$(Q):CTRL:SET") {
  field(DESC, "Write output mode to pmac")
  field(DTYP, "stream")
  field(SDIS, "$(P)$(Q):CTRL:SYNC.PACT")
  field(FLNK, "$(P)$(Q):DELAY.PROC")
  field(OUT, "@pmac.proto setIntVar(P$(PLC)90) $(PORT)")
}

record(ai, "$(P)$(Q):START:RBV") {
  field(DESC, "convert str to float")
  field(DTYP, "stream")
  field(FLNK, "$(P)$(Q):START:SYNC")
  field(INP, "@pmac.proto getIntVar(P$(PLC)81) $(PORT)")
}

record(calcout, "$(P)$(Q):START:SYNC") {
  field(DESC, "sync demand with rbv")
  field(INPB, "$(motor).MRES")
  field(INPC, "$(motor).OFF")
  field(CALC, "A*B+C")
  field(OUT, "$(P)$(Q):START PP")
  field(INPA, "$(P)$(Q):START:RBV")
}

# % gdatag,pv,rw,$(gda_name=),START
record(ao, "$(P)$(Q):START") {
  field(DESC, "Start point demand")
  field(OUT, "$(P)$(Q):CONVSTART.A PP")
}

record(calcout, "$(P)$(Q):CONVSTART") {
  field(DESC, "Convert start to cts")
  field(INPB, "$(motor).MRES")
  field(INPC, "$(motor).OFF")
  field(CALC, "FLOOR((A-C)/B+0.5)")
  field(OUT, "$(P)$(Q):START:SET PP")
}

record(longout, "$(P)$(Q):START:SET") {
  field(DESC, "Write start to pmac")
  field(DTYP, "stream")
  field(SDIS, "$(P)$(Q):START:SYNC.PACT")
  field(FLNK, "$(P)$(Q):DELAY.PROC")
  field(OUT, "@pmac.proto setIntVar(P$(PLC)91) $(PORT)")
}

record(calcout, "$(P)$(Q):STOP:SYNC") {
  field(DESC, "sync demand with rbv")
  field(INPB, "$(motor).MRES")
  field(INPC, "$(motor).OFF")
  field(CALC, "A*B+C")
  field(OUT, "$(P)$(Q):STOP PP")
  field(INPA, "$(P)$(Q):STOP:RBV")
}

# % gdatag,pv,rw,$(gda_name=),STOP
record(ao, "$(P)$(Q):STOP") {
  field(DESC, "Stop point demand")
  field(OUT, "$(P)$(Q):CONVSTOP.A PP")
}

record(calcout, "$(P)$(Q):CONVSTOP") {
  field(DESC, "Convert stop to cts")
  field(INPB, "$(motor).MRES")
  field(INPC, "$(motor).OFF")
  field(CALC, "FLOOR((A-C)/B+0.5)")
  field(OUT, "$(P)$(Q):STOP:SET PP")
}

record(longout, "$(P)$(Q):STOP:SET") {
  field(DTYP, "stream")
  field(SDIS, "$(P)$(Q):STOP:SYNC.PACT")
  field(FLNK, "$(P)$(Q):DELAY.PROC")
  field(OUT, "@pmac.proto setIntVar(P$(PLC)92) $(PORT)")
}

record(ai, "$(P)$(Q):STEP:RBV") {
  field(DESC, "convert str to float")
  field(DTYP, "stream")
  field(FLNK, "$(P)$(Q):STEP:SYNC")
  field(INP, "@pmac.proto getIntVar(P$(PLC)83) $(PORT)")
}

record(calcout, "$(P)$(Q):STEP:SYNC") {
  field(DESC, "sync demand with rbv")
  field(INPB, "$(motor).MRES")
  field(CALC, "A*B")
  field(OUT, "$(P)$(Q):STEP PP")
  field(INPA, "$(P)$(Q):STEP:RBV")
}

# % gdatag,pv,rw,$(gda_name=),STEP
record(ao, "$(P)$(Q):STEP") {
  field(DESC, "Step incr demand")
  field(OUT, "$(P)$(Q):CONVSTEP.A PP")
}

record(calcout, "$(P)$(Q):CONVSTEP") {
  field(DESC, "Convert step to cts")
  field(INPB, "$(motor).MRES")
  field(CALC, "FLOOR(A/B+0.5)")
  field(OUT, "$(P)$(Q):STEP:SET PP")
}

record(longout, "$(P)$(Q):STEP:SET") {
  field(DESC, "Write step incr to pmac")
  field(DTYP, "stream")
  field(SDIS, "$(P)$(Q):STEP:SYNC.PACT")
  field(FLNK, "$(P)$(Q):DELAY.PROC")
  field(OUT, "@pmac.proto setIntVar(P$(PLC)93) $(PORT)")
}

record(ai, "$(P)$(Q):PULSE:RBV") {
  field(DESC, "convert str to float")
  field(DTYP, "stream")
  field(FLNK, "$(P)$(Q):PULSE:SYNC")
  field(INP, "@pmac.proto getIntVar(P$(PLC)84) $(PORT)")
}

record(calcout, "$(P)$(Q):PULSE:SYNC") {
  field(DESC, "sync demand with rbv")
  field(INPB, "$(motor).MRES")
  field(CALC, "A*B")
  field(OUT, "$(P)$(Q):PULSE PP")
  field(INPA, "$(P)$(Q):PULSE:RBV")
}

# % gdatag,pv,rw,$(gda_name=),PULSE
record(ao, "$(P)$(Q):PULSE") {
  field(DESC, "Pulse width demand")
  field(OUT, "$(P)$(Q):CONVPULSE.A PP")
}

record(calcout, "$(P)$(Q):CONVPULSE") {
  field(DESC, "Convert pulse to cts")
  field(INPB, "$(motor).MRES")
  field(CALC, "FLOOR(A/B+0.5)")
  field(OUT, "$(P)$(Q):PULSE:SET PP")
}

record(longout, "$(P)$(Q):PULSE:SET") {
  field(DESC, "Write pulse width to pmac")
  field(DTYP, "stream")
  field(SDIS, "$(P)$(Q):PULSE:SYNC.PACT")
  field(FLNK, "$(P)$(Q):DELAY.PROC")
  field(OUT, "@pmac.proto setIntVar(P$(PLC)94) $(PORT)")
}

# % gdatag,binary,rw,$(gda_name=),STA
record(bi, "$(P)$(Q):STA") {
  field(DESC, "Physical output status")
  field(ZNAM, "$(OFF=Off)")
  field(ONAM, "$(ON=On)")
  field(DTYP, "stream")
  field(INP, "@pmac.proto getIntVar(P$(PLC)85) $(PORT)")
}

record(fanout, "$(P)$(Q):RBVFAN") {
  field(DESC, "Process conversion of status")
  field(LNK1, "$(P)$(Q):CTRL:RBV")
  field(LNK2, "$(P)$(Q):START:RBV")
  field(LNK3, "$(P)$(Q):STOP:RBV")
  field(LNK4, "$(P)$(Q):STEP:RBV")
  field(LNK5, "$(P)$(Q):PULSE:RBV")
  field(LNK6, "$(P)$(Q):STA")
  field(FLNK, "$(P)$(Q):RBVFAN2")
}

# % gdatag,mbbinary,rw,$(gda_name=),STATE
record(mbbi, "$(P)$(Q):STATE") {
  field(DESC, "PLC state machine")
  field(ZRST, "ST_COMP")
  field(ONST, "ST_WATCH")
  field(TWST, "ST_CONFIG")
  field(THST, "ST_MANUAL")
  field(FRST, "ST_PREP_WATCH")
  field(DTYP, "stream")
  field(INP, "@pmac.proto getIntVar(P$(PLC)86) $(PORT)")
}

# % gdatag,pv,rw,$(gda_name=),NPULSES
record(calcout, "$(P)$(Q):NPULSES") {
  field(CALC, "A=B?-1:(C=0|D=0)?1:(ABS(A-B)-D)/C")
  field(INPA, "$(P)$(Q):START:RBV CP")
  field(INPB, "$(P)$(Q):STOP:RBV CP")
  field(INPC, "$(P)$(Q):STEP:RBV CP")
  field(INPD, "$(P)$(Q):PULSE:RBV CP")
}

record(bi, "$(P)$(Q):INIT:RBV") {
  field(DESC, "convert str to float")
  field(FLNK, "$(P)$(Q):INIT:SYNC")
  field(ZNAM, "$(OFF=Off)")
  field(ONAM, "$(ON=On)")
  field(DTYP, "stream")
  field(INP, "@pmac.proto getIntVar(P$(PLC)87) $(PORT)")
}

record(calcout, "$(P)$(Q):INIT:SYNC") {
  field(DESC, "sync demand with rbv")
  field(CALC, "A")
  field(OUT, "$(P)$(Q):INIT PP")
  field(INPA, "$(P)$(Q):INIT:RBV")
}

# % gdatag,binary,rw,$(gda_name=),INIT
record(bo, "$(P)$(Q):INIT") {
  field(DESC, "Start point demand")
  field(OUT, "$(P)$(Q):INIT:SET PP")
  field(ZNAM, "$(OFF=Off)")
  field(ONAM, "$(ON=On)")
}

record(longout, "$(P)$(Q):INIT:SET") {
  field(DESC, "Write start to pmac")
  field(DTYP, "stream")
  field(SDIS, "$(P)$(Q):INIT:SYNC.PACT")
  field(FLNK, "$(P)$(Q):DELAY.PROC")
  field(OUT, "@pmac.proto setIntVar(P$(PLC)97) $(PORT)")
}

record(fanout, "$(P)$(Q):RBVFAN2") {
  field(DESC, "Process conversion of status")
  field(LNK1, "$(P)$(Q):STATE")
  field(LNK2, "$(P)$(Q):INIT:RBV")
}

record(seq, "$(P)$(Q):DELAY") {
  field(DLY1, "0.1")
  field(DOL1, "1")
  field(LNK1, "$(P)$(Q):RBVFAN.PROC")
}

record(ai, "$(P)$(Q):STOP:RBV") {
  field(DESC, "convert str to float")
  field(DTYP, "stream")
  field(FLNK, "$(P)$(Q):STOP:SYNC")
  field(INP, "@pmac.proto getIntVar(P$(PLC)82) $(PORT)")
}

record(stringout, "$(P)$(Q):SENDMSG") {
  field(DESC, "send string to pmac")
  field(DTYP, "stream")
  field(OUT, "@pmac.proto sendString() $(PORT)")
}

#! Further lines contain data used by VisualDCT
#! View(1564,2847,1.2)
#! Record("$(P)$(Q):UPDATE",1780,1520,0,0,"$(P)$(Q):UPDATE")
#! Field("$(P)$(Q):UPDATE.FLNK",16777215,0,"$(P)$(Q):UPDATE.FLNK")
#! Link("$(P)$(Q):UPDATE.FLNK","$(P)$(Q):RBVFAN")
#! Record("$(P)$(Q):RAWCTS",1780,1660,0,0,"$(P)$(Q):RAWCTS")
#! Field("$(P)$(Q):RAWCTS.INP",16777215,1,"$(P)$(Q):RAWCTS.INP")
#! Field("$(P)$(Q):RAWCTS.FLNK",16777215,0,"$(P)$(Q):RAWCTS.FLNK")
#! Link("$(P)$(Q):RAWCTS.FLNK","$(P)$(Q):RBVFAN")
#! Record("$(P)$(Q):EGU",1980,1515,0,0,"$(P)$(Q):EGU")
#! Field("$(P)$(Q):EGU.INP",16777215,1,"$(P)$(Q):EGU.INP")
#! Record("$(P)$(Q):MOTOR",1980,1660,0,0,"$(P)$(Q):MOTOR")
#! Record("$(P)$(Q):CTRL:RBV",2320,1363,0,0,"$(P)$(Q):CTRL:RBV")
#! Field("$(P)$(Q):CTRL:RBV.FLNK",16777215,1,"$(P)$(Q):CTRL:RBV.FLNK")
#! Link("$(P)$(Q):CTRL:RBV.FLNK","$(P)$(Q):CTRL:SYNC")
#! Field("$(P)$(Q):CTRL:RBV.VAL",16777215,0,"$(P)$(Q):CTRL:RBV.VAL")
#! Record("$(P)$(Q):CTRL:SYNC",2580,1425,0,0,"$(P)$(Q):CTRL:SYNC")
#! Field("$(P)$(Q):CTRL:SYNC.DOL",16777215,0,"$(P)$(Q):CTRL:SYNC.DOL")
#! Link("$(P)$(Q):CTRL:SYNC.DOL","$(P)$(Q):CTRL:RBV.VAL")
#! Field("$(P)$(Q):CTRL:SYNC.OUT",16777215,1,"$(P)$(Q):CTRL:SYNC.OUT")
#! Link("$(P)$(Q):CTRL:SYNC.OUT","$(P)$(Q):CTRL.VAL")
#! Field("$(P)$(Q):CTRL:SYNC.PACT",16777215,1,"$(P)$(Q):CTRL:SYNC.PACT")
#! Record("$(P)$(Q):CTRL",2840,1411,0,0,"$(P)$(Q):CTRL")
#! Field("$(P)$(Q):CTRL.OUT",16777215,1,"$(P)$(Q):CTRL.OUT")
#! Link("$(P)$(Q):CTRL.OUT","$(P)$(Q):CTRL:SET.VAL")
#! Field("$(P)$(Q):CTRL.VAL",16777215,1,"$(P)$(Q):CTRL.VAL")
#! Record("$(P)$(Q):CTRL:SET",3380,1431,0,0,"$(P)$(Q):CTRL:SET")
#! Field("$(P)$(Q):CTRL:SET.VAL",16777215,0,"$(P)$(Q):CTRL:SET.VAL")
#! Field("$(P)$(Q):CTRL:SET.SDIS",16777215,0,"$(P)$(Q):CTRL:SET.SDIS")
#! Link("$(P)$(Q):CTRL:SET.SDIS","$(P)$(Q):CTRL:SYNC.PACT")
#! Field("$(P)$(Q):CTRL:SET.FLNK",16777215,1,"$(P)$(Q):CTRL:SET.FLNK")
#! Link("$(P)$(Q):CTRL:SET.FLNK","$(P)$(Q):DELAY")
#! Record("$(P)$(Q):START:RBV",2320,1705,0,0,"$(P)$(Q):START:RBV")
#! Field("$(P)$(Q):START:RBV.FLNK",16777215,1,"$(P)$(Q):START:RBV.FLNK")
#! Link("$(P)$(Q):START:RBV.FLNK","$(P)$(Q):START:SYNC")
#! Field("$(P)$(Q):START:RBV.VAL",16777215,0,"$(P)$(Q):START:RBV.VAL")
#! Record("$(P)$(Q):START:SYNC",2580,1617,0,0,"$(P)$(Q):START:SYNC")
#! Field("$(P)$(Q):START:SYNC.INPB",16777215,1,"$(P)$(Q):START:SYNC.INPB")
#! Field("$(P)$(Q):START:SYNC.INPC",16777215,1,"$(P)$(Q):START:SYNC.INPC")
#! Field("$(P)$(Q):START:SYNC.OUT",16777215,1,"$(P)$(Q):START:SYNC.OUT")
#! Link("$(P)$(Q):START:SYNC.OUT","$(P)$(Q):START.VAL")
#! Field("$(P)$(Q):START:SYNC.PACT",16777215,1,"$(P)$(Q):START:SYNC.PACT")
#! Field("$(P)$(Q):START:SYNC.INPA",16777215,0,"$(P)$(Q):START:SYNC.INPA")
#! Link("$(P)$(Q):START:SYNC.INPA","$(P)$(Q):START:RBV.VAL")
#! Record("$(P)$(Q):START",2840,1695,0,0,"$(P)$(Q):START")
#! Field("$(P)$(Q):START.OUT",16777215,1,"$(P)$(Q):START.OUT")
#! Link("$(P)$(Q):START.OUT","$(P)$(Q):CONVSTART.A")
#! Field("$(P)$(Q):START.VAL",16777215,1,"$(P)$(Q):START.VAL")
#! Record("$(P)$(Q):CONVSTART",3100,1591,0,0,"$(P)$(Q):CONVSTART")
#! Field("$(P)$(Q):CONVSTART.A",16777215,0,"$(P)$(Q):CONVSTART.A")
#! Field("$(P)$(Q):CONVSTART.INPB",16777215,1,"$(P)$(Q):CONVSTART.INPB")
#! Field("$(P)$(Q):CONVSTART.INPC",16777215,1,"$(P)$(Q):CONVSTART.INPC")
#! Field("$(P)$(Q):CONVSTART.OUT",16777215,1,"$(P)$(Q):CONVSTART.OUT")
#! Link("$(P)$(Q):CONVSTART.OUT","$(P)$(Q):START:SET.VAL")
#! Record("$(P)$(Q):START:SET",3400,1671,0,0,"$(P)$(Q):START:SET")
#! Field("$(P)$(Q):START:SET.VAL",16777215,0,"$(P)$(Q):START:SET.VAL")
#! Field("$(P)$(Q):START:SET.SDIS",16777215,0,"$(P)$(Q):START:SET.SDIS")
#! Link("$(P)$(Q):START:SET.SDIS","$(P)$(Q):START:SYNC.PACT")
#! Field("$(P)$(Q):START:SET.FLNK",16777215,1,"$(P)$(Q):START:SET.FLNK")
#! Link("$(P)$(Q):START:SET.FLNK","$(P)$(Q):DELAY")
#! Record("$(P)$(Q):STOP:SYNC",2580,1877,0,0,"$(P)$(Q):STOP:SYNC")
#! Field("$(P)$(Q):STOP:SYNC.INPB",16777215,1,"$(P)$(Q):STOP:SYNC.INPB")
#! Field("$(P)$(Q):STOP:SYNC.INPC",16777215,1,"$(P)$(Q):STOP:SYNC.INPC")
#! Field("$(P)$(Q):STOP:SYNC.OUT",16777215,1,"$(P)$(Q):STOP:SYNC.OUT")
#! Link("$(P)$(Q):STOP:SYNC.OUT","$(P)$(Q):STOP.VAL")
#! Field("$(P)$(Q):STOP:SYNC.PACT",16777215,1,"$(P)$(Q):STOP:SYNC.PACT")
#! Field("$(P)$(Q):STOP:SYNC.INPA",16777215,0,"$(P)$(Q):STOP:SYNC.INPA")
#! Link("$(P)$(Q):STOP:SYNC.INPA","$(P)$(Q):STOP:RBV.VAL")
#! Record("$(P)$(Q):STOP",2840,1955,0,0,"$(P)$(Q):STOP")
#! Field("$(P)$(Q):STOP.OUT",16777215,1,"$(P)$(Q):STOP.OUT")
#! Link("$(P)$(Q):STOP.OUT","$(P)$(Q):CONVSTOP.A")
#! Field("$(P)$(Q):STOP.VAL",16777215,1,"$(P)$(Q):STOP.VAL")
#! Record("$(P)$(Q):CONVSTOP",3100,1851,0,0,"$(P)$(Q):CONVSTOP")
#! Field("$(P)$(Q):CONVSTOP.A",16777215,0,"$(P)$(Q):CONVSTOP.A")
#! Field("$(P)$(Q):CONVSTOP.INPB",16777215,1,"$(P)$(Q):CONVSTOP.INPB")
#! Field("$(P)$(Q):CONVSTOP.INPC",16777215,1,"$(P)$(Q):CONVSTOP.INPC")
#! Field("$(P)$(Q):CONVSTOP.OUT",16777215,1,"$(P)$(Q):CONVSTOP.OUT")
#! Link("$(P)$(Q):CONVSTOP.OUT","$(P)$(Q):STOP:SET.VAL")
#! Record("$(P)$(Q):STOP:SET",3400,1945,0,0,"$(P)$(Q):STOP:SET")
#! Field("$(P)$(Q):STOP:SET.VAL",16777215,0,"$(P)$(Q):STOP:SET.VAL")
#! Field("$(P)$(Q):STOP:SET.SDIS",16777215,0,"$(P)$(Q):STOP:SET.SDIS")
#! Link("$(P)$(Q):STOP:SET.SDIS","$(P)$(Q):STOP:SYNC.PACT")
#! Field("$(P)$(Q):STOP:SET.FLNK",16777215,1,"$(P)$(Q):STOP:SET.FLNK")
#! Link("$(P)$(Q):STOP:SET.FLNK","$(P)$(Q):DELAY")
#! Record("$(P)$(Q):STEP:RBV",2320,2185,0,0,"$(P)$(Q):STEP:RBV")
#! Field("$(P)$(Q):STEP:RBV.FLNK",16777215,1,"$(P)$(Q):STEP:RBV.FLNK")
#! Link("$(P)$(Q):STEP:RBV.FLNK","$(P)$(Q):STEP:SYNC")
#! Field("$(P)$(Q):STEP:RBV.VAL",16777215,0,"$(P)$(Q):STEP:RBV.VAL")
#! Record("$(P)$(Q):STEP:SYNC",2580,2131,0,0,"$(P)$(Q):STEP:SYNC")
#! Field("$(P)$(Q):STEP:SYNC.INPB",16777215,1,"$(P)$(Q):STEP:SYNC.INPB")
#! Field("$(P)$(Q):STEP:SYNC.OUT",16777215,1,"$(P)$(Q):STEP:SYNC.OUT")
#! Link("$(P)$(Q):STEP:SYNC.OUT","$(P)$(Q):STEP.VAL")
#! Field("$(P)$(Q):STEP:SYNC.PACT",16777215,1,"$(P)$(Q):STEP:SYNC.PACT")
#! Field("$(P)$(Q):STEP:SYNC.INPA",16777215,0,"$(P)$(Q):STEP:SYNC.INPA")
#! Link("$(P)$(Q):STEP:SYNC.INPA","$(P)$(Q):STEP:RBV.VAL")
#! Record("$(P)$(Q):STEP",2840,2175,0,0,"$(P)$(Q):STEP")
#! Field("$(P)$(Q):STEP.OUT",16777215,1,"$(P)$(Q):STEP.OUT")
#! Link("$(P)$(Q):STEP.OUT","$(P)$(Q):CONVSTEP.A")
#! Field("$(P)$(Q):STEP.VAL",16777215,1,"$(P)$(Q):STEP.VAL")
#! Record("$(P)$(Q):CONVSTEP",3120,2125,0,0,"$(P)$(Q):CONVSTEP")
#! Field("$(P)$(Q):CONVSTEP.A",16777215,0,"$(P)$(Q):CONVSTEP.A")
#! Field("$(P)$(Q):CONVSTEP.INPB",16777215,1,"$(P)$(Q):CONVSTEP.INPB")
#! Field("$(P)$(Q):CONVSTEP.OUT",16777215,1,"$(P)$(Q):CONVSTEP.OUT")
#! Link("$(P)$(Q):CONVSTEP.OUT","$(P)$(Q):STEP:SET.VAL")
#! Record("$(P)$(Q):STEP:SET",3380,2151,0,0,"$(P)$(Q):STEP:SET")
#! Field("$(P)$(Q):STEP:SET.VAL",16777215,1,"$(P)$(Q):STEP:SET.VAL")
#! Field("$(P)$(Q):STEP:SET.SDIS",16777215,0,"$(P)$(Q):STEP:SET.SDIS")
#! Link("$(P)$(Q):STEP:SET.SDIS","$(P)$(Q):STEP:SYNC.PACT")
#! Field("$(P)$(Q):STEP:SET.FLNK",16777215,1,"$(P)$(Q):STEP:SET.FLNK")
#! Link("$(P)$(Q):STEP:SET.FLNK","$(P)$(Q):DELAY")
#! Record("$(P)$(Q):PULSE:RBV",2320,2405,0,0,"$(P)$(Q):PULSE:RBV")
#! Field("$(P)$(Q):PULSE:RBV.FLNK",16777215,1,"$(P)$(Q):PULSE:RBV.FLNK")
#! Link("$(P)$(Q):PULSE:RBV.FLNK","$(P)$(Q):PULSE:SYNC")
#! Field("$(P)$(Q):PULSE:RBV.VAL",16777215,0,"$(P)$(Q):PULSE:RBV.VAL")
#! Record("$(P)$(Q):PULSE:SYNC",2580,2351,0,0,"$(P)$(Q):PULSE:SYNC")
#! Field("$(P)$(Q):PULSE:SYNC.INPB",16777215,1,"$(P)$(Q):PULSE:SYNC.INPB")
#! Field("$(P)$(Q):PULSE:SYNC.OUT",16777215,1,"$(P)$(Q):PULSE:SYNC.OUT")
#! Link("$(P)$(Q):PULSE:SYNC.OUT","$(P)$(Q):PULSE.VAL")
#! Field("$(P)$(Q):PULSE:SYNC.PACT",16777215,1,"$(P)$(Q):PULSE:SYNC.PACT")
#! Field("$(P)$(Q):PULSE:SYNC.INPA",16777215,0,"$(P)$(Q):PULSE:SYNC.INPA")
#! Link("$(P)$(Q):PULSE:SYNC.INPA","$(P)$(Q):PULSE:RBV.VAL")
#! Record("$(P)$(Q):PULSE",2840,2395,0,0,"$(P)$(Q):PULSE")
#! Field("$(P)$(Q):PULSE.OUT",16777215,1,"$(P)$(Q):PULSE.OUT")
#! Link("$(P)$(Q):PULSE.OUT","$(P)$(Q):CONVPULSE.A")
#! Field("$(P)$(Q):PULSE.VAL",16777215,1,"$(P)$(Q):PULSE.VAL")
#! Record("$(P)$(Q):CONVPULSE",3120,2345,0,0,"$(P)$(Q):CONVPULSE")
#! Field("$(P)$(Q):CONVPULSE.A",16777215,0,"$(P)$(Q):CONVPULSE.A")
#! Field("$(P)$(Q):CONVPULSE.INPB",16777215,1,"$(P)$(Q):CONVPULSE.INPB")
#! Field("$(P)$(Q):CONVPULSE.OUT",16777215,1,"$(P)$(Q):CONVPULSE.OUT")
#! Link("$(P)$(Q):CONVPULSE.OUT","$(P)$(Q):PULSE:SET.VAL")
#! Record("$(P)$(Q):PULSE:SET",3380,2371,0,0,"$(P)$(Q):PULSE:SET")
#! Field("$(P)$(Q):PULSE:SET.VAL",16777215,1,"$(P)$(Q):PULSE:SET.VAL")
#! Field("$(P)$(Q):PULSE:SET.SDIS",16777215,0,"$(P)$(Q):PULSE:SET.SDIS")
#! Link("$(P)$(Q):PULSE:SET.SDIS","$(P)$(Q):PULSE:SYNC.PACT")
#! Field("$(P)$(Q):PULSE:SET.FLNK",16777215,1,"$(P)$(Q):PULSE:SET.FLNK")
#! Link("$(P)$(Q):PULSE:SET.FLNK","$(P)$(Q):DELAY")
#! Record("$(P)$(Q):STA",2060,2411,0,0,"$(P)$(Q):STA")
#! Record("$(P)$(Q):RBVFAN",1760,1828,0,0,"$(P)$(Q):RBVFAN")
#! Field("$(P)$(Q):RBVFAN.LNK1",16777215,1,"$(P)$(Q):RBVFAN.LNK1")
#! Link("$(P)$(Q):RBVFAN.LNK1","$(P)$(Q):CTRL:RBV")
#! Field("$(P)$(Q):RBVFAN.LNK2",16777215,1,"$(P)$(Q):RBVFAN.LNK2")
#! Link("$(P)$(Q):RBVFAN.LNK2","$(P)$(Q):START:RBV")
#! Field("$(P)$(Q):RBVFAN.LNK3",16777215,1,"$(P)$(Q):RBVFAN.LNK3")
#! Link("$(P)$(Q):RBVFAN.LNK3","$(P)$(Q):STOP:RBV")
#! Field("$(P)$(Q):RBVFAN.LNK4",16777215,1,"$(P)$(Q):RBVFAN.LNK4")
#! Link("$(P)$(Q):RBVFAN.LNK4","$(P)$(Q):STEP:RBV")
#! Field("$(P)$(Q):RBVFAN.LNK5",16777215,1,"$(P)$(Q):RBVFAN.LNK5")
#! Link("$(P)$(Q):RBVFAN.LNK5","$(P)$(Q):PULSE:RBV")
#! Field("$(P)$(Q):RBVFAN.LNK6",16777215,1,"$(P)$(Q):RBVFAN.LNK6")
#! Link("$(P)$(Q):RBVFAN.LNK6","$(P)$(Q):STA")
#! Field("$(P)$(Q):RBVFAN.FLNK",16777215,1,"$(P)$(Q):RBVFAN.FLNK")
#! Link("$(P)$(Q):RBVFAN.FLNK","$(P)$(Q):RBVFAN2")
#! Field("$(P)$(Q):RBVFAN.PROC",16777215,1,"$(P)$(Q):RBVFAN.PROC")
#! Record("$(P)$(Q):STATE",2080,2588,0,0,"$(P)$(Q):STATE")
#! Record("$(P)$(Q):NPULSES",2040,2151,0,1,"$(P)$(Q):NPULSES")
#! Field("$(P)$(Q):NPULSES.INPA",16777215,1,"$(P)$(Q):NPULSES.INPA")
#! Link("$(P)$(Q):NPULSES.INPA","$(P)$(Q):START:RBV.VAL")
#! Field("$(P)$(Q):NPULSES.INPB",16777215,1,"$(P)$(Q):NPULSES.INPB")
#! Link("$(P)$(Q):NPULSES.INPB","$(P)$(Q):STOP:RBV.VAL")
#! Field("$(P)$(Q):NPULSES.INPC",16777215,1,"$(P)$(Q):NPULSES.INPC")
#! Link("$(P)$(Q):NPULSES.INPC","$(P)$(Q):STEP:RBV.VAL")
#! Field("$(P)$(Q):NPULSES.INPD",16777215,1,"$(P)$(Q):NPULSES.INPD")
#! Link("$(P)$(Q):NPULSES.INPD","$(P)$(Q):PULSE:RBV.VAL")
#! Record("$(P)$(Q):INIT:RBV",2320,2597,0,0,"$(P)$(Q):INIT:RBV")
#! Field("$(P)$(Q):INIT:RBV.FLNK",16777215,1,"$(P)$(Q):INIT:RBV.FLNK")
#! Link("$(P)$(Q):INIT:RBV.FLNK","$(P)$(Q):INIT:SYNC")
#! Field("$(P)$(Q):INIT:RBV.VAL",16777215,0,"$(P)$(Q):INIT:RBV.VAL")
#! Record("$(P)$(Q):INIT:SYNC",2580,2605,0,0,"$(P)$(Q):INIT:SYNC")
#! Field("$(P)$(Q):INIT:SYNC.OUT",16777215,1,"$(P)$(Q):INIT:SYNC.OUT")
#! Link("$(P)$(Q):INIT:SYNC.OUT","$(P)$(Q):INIT.VAL")
#! Field("$(P)$(Q):INIT:SYNC.PACT",16777215,1,"$(P)$(Q):INIT:SYNC.PACT")
#! Field("$(P)$(Q):INIT:SYNC.INPA",16777215,0,"$(P)$(Q):INIT:SYNC.INPA")
#! Link("$(P)$(Q):INIT:SYNC.INPA","$(P)$(Q):INIT:RBV.VAL")
#! Record("$(P)$(Q):INIT",2840,2585,0,1,"$(P)$(Q):INIT")
#! Field("$(P)$(Q):INIT.OUT",16777215,1,"$(P)$(Q):INIT.OUT")
#! Link("$(P)$(Q):INIT.OUT","$(P)$(Q):INIT:SET.VAL")
#! Field("$(P)$(Q):INIT.VAL",16777215,1,"$(P)$(Q):INIT.VAL")
#! Record("$(P)$(Q):INIT:SET",3380,2591,0,1,"$(P)$(Q):INIT:SET")
#! Field("$(P)$(Q):INIT:SET.VAL",16777215,0,"$(P)$(Q):INIT:SET.VAL")
#! Field("$(P)$(Q):INIT:SET.SDIS",16777215,0,"$(P)$(Q):INIT:SET.SDIS")
#! Link("$(P)$(Q):INIT:SET.SDIS","$(P)$(Q):INIT:SYNC.PACT")
#! Field("$(P)$(Q):INIT:SET.FLNK",16777215,1,"$(P)$(Q):INIT:SET.FLNK")
#! Link("$(P)$(Q):INIT:SET.FLNK","$(P)$(Q):DELAY")
#! Record("$(P)$(Q):RBVFAN2",1820,2640,0,1,"$(P)$(Q):RBVFAN2")
#! Field("$(P)$(Q):RBVFAN2.LNK1",16777215,1,"$(P)$(Q):RBVFAN2.LNK1")
#! Link("$(P)$(Q):RBVFAN2.LNK1","$(P)$(Q):STATE")
#! Field("$(P)$(Q):RBVFAN2.LNK2",16777215,1,"$(P)$(Q):RBVFAN2.LNK2")
#! Link("$(P)$(Q):RBVFAN2.LNK2","$(P)$(Q):INIT:RBV")
#! Record("$(P)$(Q):DELAY",3440,2820,0,1,"$(P)$(Q):DELAY")
#! Field("$(P)$(Q):DELAY.LNK1",16777215,0,"$(P)$(Q):DELAY.LNK1")
#! Link("$(P)$(Q):DELAY.LNK1","$(P)$(Q):RBVFAN.PROC")
#! Record("$(P)$(Q):STOP:RBV",2320,1965,0,0,"$(P)$(Q):STOP:RBV")
#! Field("$(P)$(Q):STOP:RBV.FLNK",16777215,1,"$(P)$(Q):STOP:RBV.FLNK")
#! Link("$(P)$(Q):STOP:RBV.FLNK","$(P)$(Q):STOP:SYNC")
#! Field("$(P)$(Q):STOP:RBV.VAL",16777215,0,"$(P)$(Q):STOP:RBV.VAL")
#! Record("$(P)$(Q):SENDMSG",2120,3020,0,1,"$(P)$(Q):SENDMSG")
